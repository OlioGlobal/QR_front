(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4516:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6938:(e,a,s)=>{"use strict";s.d(a,{default:()=>h});var t=s(5155),r=s(2115),l=s(9946);let i=(0,l.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),n=(0,l.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var d=s(8883),c=s(9420),o=s(4516);let m=(0,l.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),g=(0,l.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),x=(0,l.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),p=e=>{let{mode:a="create",userId:s=null,initialData:l=null,onSuccess:d}=e,[c,o]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[x,p]=(0,r.useState)({name:"",designation:"",company:"",tagline:"",phone:"",email:"",address:"",linkedin:"",instagram:"",directions:""}),[u,h]=(0,r.useState)(null),[y,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{"update"===a&&l&&p({name:l.name||"",designation:l.designation||"",company:l.company||"",tagline:l.tagline||"",phone:l.phone||"",email:l.email||"",address:l.address||"",linkedin:l.linkedin||"",instagram:l.instagram||"",directions:l.directions||""})},[l,a]);let b=e=>{p({...x,[e.target.name]:e.target.value})},j=async e=>{e.preventDefault(),g(!0);let t=new FormData;t.append("userData",JSON.stringify(x)),u&&t.append("profileImage",u),y&&t.append("companyLogo",y);let r="create"===a?"".concat("https://qrbk.business99.xyz/api/","users/create"):"".concat("https://qrbk.business99.xyz/api/","users/update/").concat(s);try{let e=await fetch(r,{method:"create"===a?"POST":"PUT",body:t}),s=await e.json();if(console.log(s),e.ok)alert("create"===a?"User created successfully!":"User updated successfully!"),o(!1),d(),"create"===a&&(p({name:"",designation:"",company:"",tagline:"",phone:"",email:"",address:"",linkedin:"",instagram:"",directions:""}),h(null),f(null));else throw Error(s.message||"Request failed")}catch(e){console.error(e),alert(e.message||"Request failed")}finally{g(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"".concat("create"===a?"bg-blue-600 hover:bg-blue-700 px-6 py-2":"bg-yellow-500 hover:bg-yellow-600 p-2"," text-white rounded-md transition-colors flex items-center gap-2"),onClick:()=>o(!0),children:"create"===a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i,{size:16}),"Create User"]}):(0,t.jsx)(n,{size:16})}),c&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg w-[90%] max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"create"===a?"Create New User":"Update User"}),(0,t.jsxs)("div",{onSubmit:j,className:"space-y-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{field:"name",label:"Full Name",type:"text"},{field:"designation",label:"Designation",type:"text"},{field:"company",label:"Company",type:"text"},{field:"tagline",label:"Tagline",type:"text"},{field:"phone",label:"Phone",type:"tel"},{field:"email",label:"Email",type:"email"},{field:"linkedin",label:"LinkedIn URL",type:"url"},{field:"instagram",label:"Instagram URL",type:"url"},{field:"directions",label:"GoogleMap URL",type:"url"}].map(e=>{let{field:a,label:s,type:r}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,t.jsx)("input",{type:r,name:a,placeholder:s,value:x[a],onChange:b,required:!["linkedin","instagram","directions"].includes(a),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]},a)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,t.jsx)("textarea",{name:"address",placeholder:"Full Address",value:x.address,onChange:b,required:!0,rows:"3",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Image"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>h(e.target.files[0]),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Logo"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>f(e.target.files[0]),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,t.jsx)("button",{type:"button",onClick:()=>o(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-md transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"button",onClick:j,disabled:m,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-md flex items-center gap-2 transition-colors disabled:opacity-50",children:[m&&(0,t.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"create"===a?"Create User":"Update User"]})]})]})]})})]})},u=e=>{var a;let{user:s,isOpen:r,onClose:l}=e;return r&&s?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-[90%] shadow-xl",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold mb-4 text-center",children:["QR Code - ",s.name]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("img",{src:null==(a=s.qrCode)?void 0:a.url,alt:"QR Code for ".concat(s.name),className:"mx-auto mb-4 max-w-full h-auto border rounded-lg"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Scan this QR code to view contact details"}),(0,t.jsx)("button",{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-colors",children:"Close"})]})]})}):null},h=()=>{let[e,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[i,n]=(0,r.useState)(1),[h,y]=(0,r.useState)(1),[f,b]=(0,r.useState)(0),[j,v]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1),k=[{_id:"684b00b16a00cc30f3dc01aa",name:"Yash",designation:"Data Management Analyst",company:"testing",tagline:"testing is key",phone:"9096842842",email:"choudhariyash@gmail.com",address:"Hamal Mapde",profileImage:{url:"https://res.cloudinary.com/dsxfg3jdt/image/upload/v1749745857/visiting-cards/profiles/profile_684b00b16a00cc30f3dc01aa.jpg"},companyLogo:{url:"https://res.cloudinary.com/dsxfg3jdt/image/upload/v1749745859/visiting-cards/logos/logo_684b00b16a00cc30f3dc01aa.png"},qrCode:{url:"https://res.cloudinary.com/dsxfg3jdt/image/upload/v1749745860/visiting-cards/qr-codes/qr_684b00b16a00cc30f3dc01aa.png"},createdAt:"2025-06-12T16:30:41.406Z"},{_id:"684affba6a00cc30f3dc01a5",name:"test user",designation:"tester",company:"testing",tagline:"testing is key",phone:"7894561230",email:"test@gmail.com",address:"Hamal Mapde",profileImage:{url:"https://res.cloudinary.com/dsxfg3jdt/image/upload/v1749745605/visiting-cards/profiles/profile_684affba6a00cc30f3dc01a5.jpg"},companyLogo:{url:"https://res.cloudinary.com/dsxfg3jdt/image/upload/v1749745607/visiting-cards/logos/logo_684affba6a00cc30f3dc01a5.png"},qrCode:{url:"https://res.cloudinary.com/dsxfg3jdt/image/upload/v1749745608/visiting-cards/qr-codes/qr_684affba6a00cc30f3dc01a5.png"},createdAt:"2025-06-12T16:26:34.845Z"},{_id:"684aefe36a00cc30f3dc019e",name:"John Does",designation:"Software Engineer",company:"Tech Corp",tagline:"Innovating the future",phone:"9876543210",email:"john.doe@example.com",address:"123 Main Street",linkedin:"https://linkedin.com/in/johndoe",instagram:"https://instagram.com/johndoe",profileImage:{url:"https://res.cloudinary.com/dsxfg3jdt/image/upload/v1749744064/visiting-cards/profiles/profile_684aefe36a00cc30f3dc019e.png"},companyLogo:{url:"https://res.cloudinary.com/dsxfg3jdt/image/upload/v1749744067/visiting-cards/logos/logo_684aefe36a00cc30f3dc019e.png"},qrCode:{url:"https://res.cloudinary.com/dsxfg3jdt/image/upload/v1749741552/visiting-cards/qr-codes/qr_684aefe36a00cc30f3dc019e.png"},createdAt:"2025-06-12T15:18:59.920Z"}],C=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;l(!0);try{let s=await fetch("".concat("https://qrbk.business99.xyz/api/","users/all?page=").concat(e,"&limit=10"));if(s.ok){let{data:t,totalUsers:r,totalPages:l}=await s.json();a(t),b(r),y(l),n(e)}else a(k),b(k.length),y(1),n(1)}catch(e){console.error("Error fetching users:",e),a(k),b(k.length),y(1),n(1)}finally{l(!1)}};(0,r.useEffect)(()=>{C()},[]);let A=async(e,a)=>{if(window.confirm("Are you sure you want to delete ".concat(a,"?")))try{if((await fetch("".concat("https://qrbk.business99.xyz/api/","users/delete/").concat(e),{method:"DELETE"})).ok)alert("User deleted successfully!"),C(i);else throw Error("Failed to delete user")}catch(e){console.error("Error deleting user:",e),alert("Failed to delete user")}},q=e=>{v(e),w(!0)};return s&&0===e.length?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full"})}):(0,t.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Total ",f," users • Page ",i," of ",h]})]}),(0,t.jsx)(p,{mode:"create",onSuccess:()=>C(1)})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left p-4 font-semibold text-gray-700",children:"Profile"}),(0,t.jsx)("th",{className:"text-left p-4 font-semibold text-gray-700",children:"Contact Info"}),(0,t.jsx)("th",{className:"text-left p-4 font-semibold text-gray-700",children:"Company"}),(0,t.jsx)("th",{className:"text-left p-4 font-semibold text-gray-700",children:"Visit Count"}),(0,t.jsx)("th",{className:"text-left p-4 font-semibold text-gray-700",children:"QR Code"}),(0,t.jsx)("th",{className:"text-center p-4 font-semibold text-gray-700",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>{var a,s,r;return(0,t.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:null==(a=e.profileImage)?void 0:a.url,alt:e.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.designation})]})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(d.A,{size:14,className:"text-gray-400"}),(0,t.jsx)("span",{children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(c.A,{size:14,className:"text-gray-400"}),(0,t.jsx)("span",{children:e.phone})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(o.A,{size:14,className:"text-gray-400"}),(0,t.jsx)("span",{className:"truncate max-w-xs",children:e.address})]})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:null==(s=e.companyLogo)?void 0:s.url,alt:e.company,className:"w-10 h-10 rounded object-cover border border-gray-200"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.company}),(0,t.jsx)("div",{className:"text-sm text-gray-600 italic",children:(null==(r=e.tagline)?void 0:r.length)>20?e.tagline.slice(0,20)+"...":e.tagline})]})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(m,{size:14,className:"text-gray-400"}),(0,t.jsx)("span",{children:e.visitCount})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("button",{onClick:()=>q(e),className:"bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-2 rounded-md text-sm flex items-center gap-2 transition-colors",children:[(0,t.jsx)(g,{size:14}),"View QR"]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(p,{mode:"update",userId:e._id,initialData:e,onSuccess:()=>C(i)}),(0,t.jsx)("button",{onClick:()=>A(e._id,e.name),className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-md transition-colors",children:(0,t.jsx)(x,{size:16})})]})})]},e._id)})})]})}),h>1&&(0,t.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>C(i-1),disabled:1===i,className:"px-4 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,t.jsx)("div",{className:"flex gap-1",children:Array.from({length:h},(e,a)=>a+1).map(e=>(0,t.jsx)("button",{onClick:()=>C(e),className:"px-3 py-2 rounded-md ".concat(e===i?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-50"),children:e},e))}),(0,t.jsx)("button",{onClick:()=>C(i+1),disabled:i===h,className:"px-4 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})})]}),(0,t.jsx)(u,{user:j,isOpen:N,onClose:()=>{w(!1),v(null)}})]})}},7761:(e,a,s)=>{Promise.resolve().then(s.bind(s,6938))},8883:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},9420:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},9946:(e,a,s)=>{"use strict";s.d(a,{A:()=>m});var t=s(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,s)=>s?s.toUpperCase():a.toLowerCase()),i=e=>{let a=l(e);return a.charAt(0).toUpperCase()+a.slice(1)},n=function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return a.filter((e,a,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===a).join(" ").trim()},d=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,t.forwardRef)((e,a)=>{let{color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:m,iconNode:g,...x}=e;return(0,t.createElement)("svg",{ref:a,...c,width:r,height:r,stroke:s,strokeWidth:i?24*Number(l)/Number(r):l,className:n("lucide",o),...!m&&!d(x)&&{"aria-hidden":"true"},...x},[...g.map(e=>{let[a,s]=e;return(0,t.createElement)(a,s)}),...Array.isArray(m)?m:[m]])}),m=(e,a)=>{let s=(0,t.forwardRef)((s,l)=>{let{className:d,...c}=s;return(0,t.createElement)(o,{ref:l,iconNode:a,className:n("lucide-".concat(r(i(e))),"lucide-".concat(e),d),...c})});return s.displayName=i(e),s}}},e=>{var a=a=>e(e.s=a);e.O(0,[441,684,358],()=>a(7761)),_N_E=e.O()}]);